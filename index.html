<!DOCTYPE html>
<html>
<head>
    <title>Edubot</title>
    <style>
        .chat-container {
            width: 400px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            background-color: #58b5e7;
            background-image: image-set('https://cdn.discordapp.com/attachments/751655635661357067/1130650080282673333/bg_osu_cupang_mania.jpg');
            font-family: Arial, sans-serif;
        }

        .chat-log {
            height: 300px;
            overflow-y: scroll;
        }

        .user-message {
            margin-bottom: 10px;
            text-align: right;
        }

        .bot-message {
            margin-bottom: 10px;
            text-align: left;
        }

        .message-bubble {
            display: inline-block;
            padding: 10px;
            border-radius: 10px;
        }

        .message-image {
            max-width: 300px;
            max-height: 500px;
        }

        .user-bubble {
            background-color: rgb(159, 28, 139);
            color: #fff;
        }

        .bot-bubble {
            background-color: rgb(112, 0, 204);
            color: #fff;
        }

        .input-container {
            margin-top: 10px;
        }

        .input-field {
            width: 100%;
            padding: 5px;
            border: none;
            border-radius: 5px;
        }

        .send-button {
            margin-top: 5px;
            width: 100%;
            padding: 5px;
            border: none;
            border-radius: 5px;
            background-color: #0c4;
            color: #fff;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <h1>Edubot</h1>
        <div class="chat-log" id="chat-log"></div>
        <div class="input-container">
            <input type="text" class="input-field" id="user-input" placeholder="Ketik pesan...">
            <button class="send-button" id="send-button">Kirim</button>
        </div>
    </div>

    <script>
        // Definisikan pola-pola dan responnya
        const pola = [
            ['halo', ['hi']],
            ['kamu siapa', ['halo, aku Edubot. Aku siap bantu menjawab pertanyaanmu']],
            ['apa itu fotosintesis', ['proses tumbuhan memproduksi makanan sendiri']],
            ['hukum newton terdiri apa aja', ['hukum newton 1, hukum newton 2, hukum newton 3']],
            ['siapa penemu teori relativitas', ['albert enstein']],
            ['aku pergi dulu ya', ['Terima kasih! Sampai jumpa lagi.']],
            ['tunjukkan gambar atom', ['https://tse3.mm.bing.net/th?id=OIP.fsw_FqGe2-tuxG-fKi_T7QHaFl&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan logo universitas brawijaya', ['https://tse3.mm.bing.net/th?id=OIP.suxUL5kjq4RGllsq7SPg4AHaHf&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan rumus sin cos tan', ['https://tse2.mm.bing.net/th?id=OIP.pnksWnkVoyEhh5NwmLJBvAHaDC&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan tingkatan klasifikasi pada makhluk hidup', ['https://tse2.mm.bing.net/th?id=OIP.0PAKt3f7cegay3XY4EPjUAHaEK&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan organ reproduksi wanita', ['https://tse4.mm.bing.net/th?id=OIP.EqnZE6vqsEwaWHYtFpDzuwHaFj&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan organ reproduksi pria', ['https://tse3.mm.bing.net/th?id=OIP.-L6nmk2bK9lDpztH3aJ8-wHaFb&pid=Api&P=0&h=180.jpg']],
            ['tunjukkan rumus transformasi', ['https://i0.wp.com/soalkimia.com/wp-content/uploads/2020/05/Soal-rotasi-translasi-dan-reformasi.jpg']],
            ['cerita sangkuriang',  ['Cerita Sangkuriang berasal dari cerita Dayang Sumbi yang bermula tinggal di Kahyangan.Dimana diceritakan ada sepasang Dewa dan Dewi yang di hukum menjadi hewan dan menjalani masa hukumannya di bumi.Sang Dewa yang menjelma menjadi anjing jantan bernama si Tumang sedangkan Sang Dewi menjelma jadi babi hutan betina bernama Celeng Wayung Hyang.Suatu ketika seorang raja bernama Sungging Perbangkara pergi berburu. Di tengah hutan, raja ingin buang air kecil dan di tampungnya di batok kelapa.Setelah itu Celeng Wayung Hyang yang kehausan meminumnya. Dan seketika itu babi betina itu hamil dan melahirkan seorang putri cantik.Raja Sungging Perbangkara yang menemukan bayi tersebut membawanya ke istana.Dan dinamai lah putri tersebut Dayang Sumbi. Dayang sumbi tumbuh menjadi gadis yang sangat cantik. Sehingga banyak raja yang melamarnya.Namun, semua lamaran tersebut di tolak dan menjadikan para raja tersebut berperang. Dayang Sumbi lalu memilih mengasingkan diri ke hutan dengan di temani oleh seekor anjing yaitu si Tumang.Di kisahkan saat pengasingannya di hutan Dayang Sumbi saat itu sedang asyik menenun, tempat kainnya jatuh dan ia malas untuk mengambilnya.Dan Dayang Sumbi berujar jika yang mengambilkannya adalah lelaki akan dijadikan suaminya dan jika perempuan akan di jadikan saudaranya.Dan Tumang lah yang membawakannya mau tidak mau Dayang Sumbi harus memenuhi janjinya tersebut.Dan Tumang akhirnya menikah karena suatu janji. Atas pernikahan tersebut lalu lahirlah seorang putra yang tampan bernama Sangkuriang.Setelah cukup remaja Sangkuriang di tugaskan untuk berburu oleh ibunya ke hutan untuk membawa hati rusa. Berangkatlah Sangkuriang dan Tumang ke hutan.Di hutan Sangkuriang ingin memburu babi hutan karena tidak menemukan rusa.Saat Tumang di suruh untuk mengejar dan membunuh babi hutan ia menolak dan malah diam tak bergerak.Karena Tumang tahu bahwa babi itu adalah Wayung Hyang yang merupakan ibu dari dayang Sumbi.Sangkuriang marah dan akhirnya membunuh Tumang dan membawa hati anjing itu untuk di berikan ibunya.Dayang Sumbi menerima hati tersebut membersihkan dan memasaknya. Saat tengah makan tiba-tiba Dayang Sumbi teringat kemana Tumang dan ditanyakanlah kepada Sangkuriang.Lalu Sangkuriang menceritakan telah membunuh Tumang karena ia tidak menaati perintahnya.Sontak hal tersebut membuat Dayang Sumbi marah dan mengatakan Tumang itu adalah ayahmu dan kamu adalah pembunuhnya.Dari kemarahan itu Dayang Sumbi memukulkan centong ke kepala Sangkuriang hingga berdarah-darah dan Sangkuriang kabur ke hutan.Beberapa tahun kemudian Sangkuriang tumbuh menjadi pemburu yang lihai dan pemuda yang sangat tampan.Dan ia tak sengaja Dayang Sumbi di hutan. Sangkuriang yang telah hilang ingatan ia jatuh cinta kepada ibunya sendiri.Dayang Sumbi yang tidak bisa menua karena keturunan dewi, namun, ia mengetahui bahwa pemuda itu adalah Sangkuriang Putranya.Sangkuriang yang tengah jatuh cinta pun melamar Dayang Sumbi.Dan Dayang Sumbi membuat persyaratan yang tak mungkin Sangkuriang penuhi agar menghindari pernikahan tersebut.Dayang Sumbi meminta untuk dibuatkan perahu dan telaga yang harus jadi dalam semalam dengan membendung aliran sungai Citarum. Syarat itu di sanggupi oleh Sangkuriang.Mengetahui hal tersebut Dayang Sumbi pun memukulkan alu ke lesung sebagai pertanda bahwa fajar telah tiba.Alhasil makhluk suruhan Sangkuriang ketakutan dan pergi sebelum tugasnya selesai.Karena gagal memenuhi syarat Sangkuriang mengamuk dan menendang perahu yang di buatnya ke arah utara.Dan dalam sekejap, perahu yang jatuh menelungkup itu berubah menjadi gunung Tangkuban Perahu.']],
            ['tunjukkan gambar gajah', ['http://1.bp.blogspot.com/-oMM5NfdI55c/VUwwMUXMEiI/AAAAAAAAILY/0p3BuFqyX4Y/s1600/gambar%2Bgajah%2B(4).jpg']]
        ];

        // Inisialisasi objek Chat dengan pola-pola yang telah didefinisikan
        const chatbot = new Chat(pola);

        // Fungsi untuk menambahkan pesan ke log chat
        function addMessageToChatLog(message, isUser, isImage = false) {
            const chatLog = document.getElementById('chat-log');

            const messageContainer = document.createElement('div');
            messageContainer.className = isUser ? 'user-message' : 'bot-message';

            if (isImage) {
                const imageElement = document.createElement('img');
                imageElement.src = message;
                imageElement.className = 'message-image';

                messageContainer.appendChild(imageElement);
            } else {
                const messageBubble = document.createElement('div');
                messageBubble.className = isUser ? 'message-bubble user-bubble' : 'message-bubble bot-bubble';
                messageBubble.textContent = message;

                messageContainer.appendChild(messageBubble);
            }

            chatLog.appendChild(messageContainer);

            // Auto scroll ke bawah saat pesan baru ditambahkan
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        // Fungsi untuk memproses pesan dari pengguna
        function processUserMessage() {
            const userInput = document.getElementById('user-input').value;

            if (userInput !== '') {
                addMessageToChatLog(userInput, true);

                const response = chatbot.respond(userInput);

                if (response.startsWith('http') && (response.endsWith('.jpg') || response.endsWith('.png'))) {
                    addMessageToChatLog(response, false, true);
                } else {
                    addMessageToChatLog(response, false);
                }

                document.getElementById('user-input').value = '';
            }
        }

        // Menangani klik tombol Kirim
        document.getElementById('send-button').addEventListener('click', function() {
            processUserMessage();
        });

        // Menangani tombol Enter pada input teks
        document.getElementById('user-input').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                processUserMessage();
            }
        });

        // Objek Chat
        function Chat(pola) {
            this.pola = pola;
        }

        // Metode untuk mencari respon berdasarkan pola
        Chat.prototype.respond = function(userInput) {
            for (let i = 0; i < this.pola.length; i++) {
                const pattern = this.pola[i][0];
                const response = this.pola[i][1];

                if (userInput.match(new RegExp(pattern, 'i'))) {
                    if (typeof response === 'string') {
                        return response;
                    } else if (typeof response === 'function') {
                        return response(userInput);
                    } else if (response instanceof Array) {
                        return response[Math.floor(Math.random() * response.length)];
                    }
                }
            }

            return 'Maaf, saya tidak mengerti. Silakan ajukan pertanyaan lain.';
        };
    </script>
</body>
</html>
